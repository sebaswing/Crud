{"ast":null,"code":"import { Paciente } from '../Modelo/Paciente';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../services/auth.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\n\nfunction LoginComponent_div_12_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"campo mail es obligatorio\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction LoginComponent_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 21);\n    i0.ɵɵtemplate(1, LoginComponent_div_12_div_1_Template, 2, 0, \"div\", 22);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n\n    const _r1 = i0.ɵɵreference(11);\n\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r1.errors.required);\n  }\n}\n\nfunction LoginComponent_div_15_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"campo contrase\\u00F1a es obligatorio.\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction LoginComponent_div_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 21);\n    i0.ɵɵtemplate(1, LoginComponent_div_15_div_1_Template, 2, 0, \"div\", 22);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n\n    const _r3 = i0.ɵɵreference(14);\n\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r3.errors.required);\n  }\n}\n\nfunction LoginComponent_div_18_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"campo Token es obligatorio.\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction LoginComponent_div_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 21);\n    i0.ɵɵtemplate(1, LoginComponent_div_18_div_1_Template, 2, 0, \"div\", 22);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n\n    const _r5 = i0.ɵɵreference(17);\n\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r5.errors.required);\n  }\n}\n\nfunction LoginComponent_div_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 23)(1, \"div\");\n    i0.ɵɵtext(2, \"Error al ingresar a la aplicaci\\u00F3n. \");\n    i0.ɵɵelement(3, \"br\");\n    i0.ɵɵtext(4, \"Su token es incorrecto.\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction LoginComponent_div_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 23)(1, \"div\");\n    i0.ɵɵtext(2, \"Error al ingresar a la aplicaci\\u00F3n. \");\n    i0.ɵɵelement(3, \"br\");\n    i0.ɵɵtext(4, \"Revise sus datos y vuelva a intentarlo.\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nexport let LoginComponent = /*#__PURE__*/(() => {\n  class LoginComponent {\n    constructor(router, authService) {\n      this.router = router;\n      this.authService = authService;\n      this.encontrado = new Paciente();\n      this.approved = false;\n      this.aproved = true;\n      this.tokenIncorrecto = true;\n      this.returnUrl = '/lista-vacunas';\n    }\n\n    ngOnInit() {\n      this.email = '';\n      this.pass = '';\n      this.authService.logout();\n    }\n\n    checkLogin(form) {\n      if (this.email == \"paciente1@gmail.com\") {\n        //this.paciente = {id:2, dni:43234234, nombre:\"paciente1\", apellido:\"paciente1Apellido\"};//,centro_vacunatorio: {nombre: \"Zona 2\", fechaAplicacion: \"12/04/2020\"}, email:\"paciente1@gmail.com\", clave:\"123456\", fechaNacimiento:new Date('12/12/1999 23:32:00'), token:98765, completo_vacunas:2}\n        localStorage.setItem('user', JSON.stringify(this.paciente));\n        localStorage.setItem('isLoggedIn', \"true\");\n        localStorage.setItem('token', this.encontrado.email);\n        localStorage.setItem('tipo', 'paciente'); // Esto se debe manejar encubierto. CAMBIAR a un servicio\n\n        this.router.navigate([\"home\"]);\n      } else {\n        this.authService.checkLog(this.email).subscribe(usuario => {\n          this.encontrado = usuario;\n\n          if (this.approved == false && this.encontrado != null && this.encontrado.email === this.email && this.encontrado.clave == this.pass && this.encontrado.token == this.token) {\n            // this.authService.authLogin(this.model);\n            localStorage.setItem('idPaciente', this.encontrado.id + \"\");\n            localStorage.setItem('token', this.encontrado.email);\n            localStorage.setItem('edad', this.calcularEdad(this.encontrado.fechaNacimiento) + \"\");\n            console.log(this.encontrado.email);\n\n            if (this.encontrado.completo_vacunas == 1) {\n              localStorage.setItem('isLoggedIn', \"true\");\n              localStorage.setItem('tipo', 'paciente');\n              this.router.navigate([this.returnUrl]);\n            } else {\n              this.router.navigate(['agregarVacunas']);\n            }\n          } else {\n            if (this.encontrado.token != this.token) this.tokenIncorrecto = false;else this.aproved = false;\n          }\n        });\n      }\n    }\n\n    calcularEdad(nacimiento) {\n      var timeDiff = Math.abs(Date.now() - new Date(nacimiento).getTime());\n      return Math.floor(timeDiff / (1000 * 3600 * 24) / 365.25);\n    }\n\n  }\n\n  LoginComponent.ɵfac = function LoginComponent_Factory(t) {\n    return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.AuthService));\n  };\n\n  LoginComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: LoginComponent,\n    selectors: [[\"app-login\"]],\n    decls: 35,\n    vars: 9,\n    consts: [[\"href\", \"//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css\", \"rel\", \"stylesheet\", \"id\", \"bootstrap-css\"], [1, \"wrapper\", \"fadeInDown\"], [\"id\", \"formContent\"], [1, \"fadeIn\", \"first\"], [3, \"ngSubmit\"], [\"form\", \"ngForm\"], [\"src\", \"../../assets/logocortado.png\"], [\"type\", \"email\", \"id\", \"email\", \"name\", \"name\", \"placeholder\", \"email\", \"required\", \"\", 1, \"fadeIn\", \"second\", 3, \"ngModel\", \"ngModelChange\"], [\"mail\", \"ngModel\"], [\"class\", \"error\", 4, \"ngIf\"], [\"type\", \"password\", \"id\", \"password\", \"name\", \"pass\", \"placeholder\", \"password\", \"required\", \"\", 1, \"fadeIn\", \"third\", 3, \"ngModel\", \"ngModelChange\"], [\"password\", \"ngModel\"], [\"type\", \"number\", \"id\", \"token\", \"name\", \"token\", \"placeholder\", \"token\", \"required\", \"\", 1, \"fadeIn\", \"second\", 3, \"ngModel\", \"ngModelChange\"], [\"tokenn\", \"ngModel\"], [\"class\", \"error alert alert-danger mt-3\", 4, \"ngIf\"], [\"type\", \"submit\", \"value\", \"Log In\", 1, \"fadeIn\", \"fourth\", 3, \"disabled\"], [\"routerLink\", \"/recuperarClave\", \"routerLinkActive\", \"active\", 1, \"nav-link\"], [1, \"fas\", \"fa-gamepad\"], [\"routerLink\", \"/createUser\", \"routerLinkActive\", \"active\", 1, \"nav-link\"], [\"routerLink\", \"/loginVacunador\", \"routerLinkActive\", \"active\", 1, \"nav-link\"], [\"routerLink\", \"/loginAdministrador\", \"routerLinkActive\", \"active\", 1, \"nav-link\"], [1, \"error\"], [4, \"ngIf\"], [1, \"error\", \"alert\", \"alert-danger\", \"mt-3\"]],\n    template: function LoginComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        const _r12 = i0.ɵɵgetCurrentView();\n\n        i0.ɵɵelement(0, \"link\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1)(2, \"div\", 2);\n        i0.ɵɵelement(3, \"div\", 3);\n        i0.ɵɵelementStart(4, \"form\", 4, 5);\n        i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_Template_form_ngSubmit_4_listener() {\n          i0.ɵɵrestoreView(_r12);\n\n          const _r0 = i0.ɵɵreference(5);\n\n          return i0.ɵɵresetView(ctx.checkLogin(_r0));\n        });\n        i0.ɵɵelementStart(6, \"p\");\n        i0.ɵɵelement(7, \"img\", 6)(8, \"br\");\n        i0.ɵɵtext(9, \"Ingresa a tu cuenta\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"input\", 7, 8);\n        i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_10_listener($event) {\n          return ctx.email = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(12, LoginComponent_div_12_Template, 2, 1, \"div\", 9);\n        i0.ɵɵelementStart(13, \"input\", 10, 11);\n        i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_13_listener($event) {\n          return ctx.pass = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(15, LoginComponent_div_15_Template, 2, 1, \"div\", 9);\n        i0.ɵɵelementStart(16, \"input\", 12, 13);\n        i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_16_listener($event) {\n          return ctx.token = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(18, LoginComponent_div_18_Template, 2, 1, \"div\", 9);\n        i0.ɵɵtemplate(19, LoginComponent_div_19_Template, 5, 0, \"div\", 14);\n        i0.ɵɵtemplate(20, LoginComponent_div_20_Template, 5, 0, \"div\", 14);\n        i0.ɵɵelement(21, \"input\", 15)(22, \"br\");\n        i0.ɵɵelementStart(23, \"a\", 16);\n        i0.ɵɵelement(24, \"i\", 17);\n        i0.ɵɵtext(25, \"Recuperar contrase\\u00F1a\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(26, \"a\", 18);\n        i0.ɵɵelement(27, \"i\", 17);\n        i0.ɵɵtext(28, \"Crear Usuario\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(29, \"a\", 19);\n        i0.ɵɵelement(30, \"i\", 17);\n        i0.ɵɵtext(31, \"Ingresar como vacunador\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(32, \"a\", 20);\n        i0.ɵɵelement(33, \"i\", 17);\n        i0.ɵɵtext(34, \"Ingresar como administrador\");\n        i0.ɵɵelementEnd()()();\n      }\n\n      if (rf & 2) {\n        const _r0 = i0.ɵɵreference(5);\n\n        const _r1 = i0.ɵɵreference(11);\n\n        const _r3 = i0.ɵɵreference(14);\n\n        const _r5 = i0.ɵɵreference(17);\n\n        i0.ɵɵadvance(10);\n        i0.ɵɵproperty(\"ngModel\", ctx.email);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", _r1.invalid && (_r1.dirty || _r1.touched));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngModel\", ctx.pass);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", _r3.invalid && (_r3.dirty || _r3.touched));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngModel\", ctx.token);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", _r5.invalid && (_r5.dirty || _r5.touched));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.tokenIncorrecto);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.aproved);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"disabled\", !_r0.valid);\n      }\n    },\n    dependencies: [i3.NgIf, i1.RouterLinkWithHref, i1.RouterLinkActive, i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.NumberValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.RequiredValidator, i4.NgModel, i4.NgForm],\n    styles: [\"html[_ngcontent-%COMP%]{background-color:#56baed}img[_ngcontent-%COMP%]{width:30%}body[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;height:100vh}p[_ngcontent-%COMP%]{background-color:#a2cc84;color:#fff}a[_ngcontent-%COMP%]{color:#92badd;display:inline-block;text-decoration:none;font-weight:400}h2[_ngcontent-%COMP%]{text-align:center;font-size:16px;font-weight:600;text-transform:uppercase;display:inline-block;margin:40px 8px 10px;color:#ccc}.wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column;justify-content:center;width:100%;min-height:100%;padding:20px}input[_ngcontent-%COMP%]::-webkit-outer-spin-button, input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}#formContent[_ngcontent-%COMP%]{border-radius:10px;background:#fff;width:90%;max-width:450px;position:relative;padding:0;box-shadow:0 30px 60px #0000004d;text-align:center}#formFooter[_ngcontent-%COMP%]{background-color:#f6f6f6;border-top:1px solid #dce8f1;padding:25px;text-align:center;border-radius:0 0 10px 10px}h2.inactive[_ngcontent-%COMP%]{color:#ccc}h2.active[_ngcontent-%COMP%]{color:#000;border-bottom:2px solid #5fbae9}.error[_ngcontent-%COMP%]{background-color:#f7cccc;border:none;color:#ec0d0d;padding:15px 80px;text-align:center;text-decoration:none;display:inline-block;text-transform:uppercase;font-size:13px;box-shadow:0 10px 30px #ffd7d7f5;border-radius:5px;margin:5px 20px;transition:all .3s ease-in-out}input[type=button][_ngcontent-%COMP%], input[type=submit][_ngcontent-%COMP%], input[type=reset][_ngcontent-%COMP%]{background-color:#a2cc84;border:none;color:#fff;padding:15px 80px;text-align:center;text-decoration:none;display:inline-block;text-transform:uppercase;font-size:13px;box-shadow:0 10px 30px #5fbae966;border-radius:5px;margin:5px 20px 40px;transition:all .3s ease-in-out}input[type=button][_ngcontent-%COMP%]:hover, input[type=submit][_ngcontent-%COMP%]:hover, input[type=reset][_ngcontent-%COMP%]:hover{background-color:#a2cc84}input[type=button][_ngcontent-%COMP%]:active, input[type=submit][_ngcontent-%COMP%]:active, input[type=reset][_ngcontent-%COMP%]:active{transform:scale(.95)}input[type=submit][_ngcontent-%COMP%]:disabled{background-color:#d2e6c4}input[type=password][_ngcontent-%COMP%], input[type=email][_ngcontent-%COMP%], input[type=number][_ngcontent-%COMP%]{background-color:#f6f6f6;border:none;color:#000;padding:15px 32px;text-align:center;text-decoration:none;display:inline-block;font-size:16px;margin:5px;width:85%;border:2px solid #f6f6f6;transition:all .5s ease-in-out;border-radius:5px}input[type=password][_ngcontent-%COMP%]:focus, input[type=email][_ngcontent-%COMP%]:focus, input[type=number][_ngcontent-%COMP%]:focus{background-color:#fff;border-bottom:2px solid #A2CC84}input[type=password][_ngcontent-%COMP%]:placeholder, input[type=email][_ngcontent-%COMP%]:placeholder, input[type=number][_ngcontent-%COMP%]:placeholder{color:#ccc}.fadeInDown[_ngcontent-%COMP%]{animation-name:fadeInDown;animation-duration:1s;animation-fill-mode:both}@keyframes fadeInDown{0%{opacity:0;transform:translate3d(0,-100%,0)}to{opacity:1;transform:none}}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}.fadeIn[_ngcontent-%COMP%]{opacity:0;animation:fadeIn ease-in 1;animation-fill-mode:forwards;animation-duration:1s}.fadeIn.first[_ngcontent-%COMP%]{animation-delay:.4s}.fadeIn.second[_ngcontent-%COMP%]{animation-delay:.6s}.fadeIn.third[_ngcontent-%COMP%]{animation-delay:.8s}.fadeIn.fourth[_ngcontent-%COMP%]{animation-delay:1s}.underlineHover[_ngcontent-%COMP%]:after{display:block;left:0;bottom:-10px;width:0;height:2px;background-color:#56baed;content:\\\"\\\";transition:width .2s}.underlineHover[_ngcontent-%COMP%]:hover{color:#a2cc84}.underlineHover[_ngcontent-%COMP%]:hover:after{width:100%}*[_ngcontent-%COMP%]:focus{outline:none}#icon[_ngcontent-%COMP%]{width:60%}\"]\n  });\n  return LoginComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}